import{a as e,c as t,o as n,s as r}from"./index-grgPxBGB.js";var i=t(r(),1),a=t(n(),1),o=[`hearts`,`diamonds`,`clubs`,`spades`],s={hearts:`â™¥`,diamonds:`â™¦`,clubs:`â™£`,spades:`â™ `},c={hearts:`#e74c3c`,diamonds:`#e74c3c`,clubs:`#2c3e50`,spades:`#2c3e50`},l=[`A`,`2`,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`10`,`J`,`Q`,`K`];function u({onClose:t,onMinimize:n,icon:r}){let[u,d]=(0,i.useState)(window.innerWidth),[f,p]=(0,i.useState)([[],[],[],[],[],[],[]]),[m,h]=(0,i.useState)([[],[],[],[]]),[g,_]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[b,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=()=>d(window.innerWidth);return window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]),(0,i.useEffect)(()=>{w()},[]);let S=()=>{let e=[];for(let t of o)for(let n=1;n<=13;n++)e.push({suit:t,value:n,faceUp:!1});return C(e)},C=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},w=()=>{let e=S(),t=[[],[],[],[],[],[],[]],n=[],r=[],i=[[],[],[],[]],a=0;for(let n=0;n<7;n++)for(let r=0;r<=n;r++){let i={...e[a],faceUp:r===n};t[n].push(i),a++}for(let t=a;t<e.length;t++)n.push(e[t]);p(t),y(n),_(r),h(i),x(null)},T=()=>{if(v.length===0&&g.length>0)y(g.map(e=>({...e,faceUp:!1})).reverse()),_([]);else if(v.length>0){let e=v[v.length-1];y(v.slice(0,-1)),_([...g,{...e,faceUp:!0}])}},E=(e,t)=>{if(t.length===0)return e.value===13;let n=t[t.length-1];if(!n.faceUp)return!1;let r=e.suit===`hearts`||e.suit===`diamonds`,i=n.suit===`hearts`||n.suit===`diamonds`;return e.value===n.value-1&&r!==i},D=(e,t)=>{if(t.length===0)return e.value===1;let n=t[t.length-1];return e.suit===n.suit&&e.value===n.value+1},O=(e,t,n)=>{if(b){let n=null;if(b.type===`column`&&b.cardIndex!==void 0){let e=f[b.index];e[b.cardIndex]&&(n=e[b.cardIndex])}else b.type===`waste`?n=g[g.length-1]:b.type===`foundation`&&(n=m[b.index][m[b.index].length-1]);if(n&&e===`column`){if(E(n,f[t])){if(b.type===`column`&&b.cardIndex!==void 0){let e=[...f],n=e[b.index].slice(b.cardIndex);e[b.index]=e[b.index].slice(0,b.cardIndex),e[b.index].length>0&&(e[b.index][e[b.index].length-1].faceUp=!0),e[t]=[...e[t],...n],p(e)}else if(b.type===`waste`){let e=g.slice(0,-1),r=[...f];r[t]=[...r[t],n],_(e),p(r)}}}else if(n&&e===`foundation`&&D(n,m[t]))if(b.type===`column`&&b.cardIndex!==void 0){let e=[...f],n=e[b.index].pop();e[b.index].length>0&&(e[b.index][e[b.index].length-1].faceUp=!0),p(e),h(m.map((e,r)=>r===t?[...e,n]:e))}else b.type===`waste`&&(_(g.slice(0,-1)),h(m.map((e,r)=>r===t?[...e,n]:e)));x(null)}else e===`column`&&n!==void 0?f[t][n]?.faceUp&&x({type:e,index:t,cardIndex:n}):(e===`waste`&&g.length>0||e===`foundation`&&m[t].length>0)&&x({type:e,index:t})},k=(e,t=!1)=>e.faceUp?(0,a.jsxs)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,background:`#fff`,border:t?`2px solid #3498db`:`1px solid #ccc`,borderRadius:`4px`,padding:`4px`,display:`flex`,flexDirection:`column`,justifyContent:`space-between`,cursor:`pointer`,boxShadow:t?`0 0 8px #3498db`:`0 2px 4px rgba(0,0,0,0.2)`,fontSize:u<=480?`10px`:`12px`,fontWeight:`bold`},children:[(0,a.jsxs)(`div`,{style:{color:c[e.suit]},children:[l[e.value-1],` `,s[e.suit]]}),(0,a.jsx)(`div`,{style:{alignSelf:`center`,fontSize:u<=480?`16px`:`20px`,color:c[e.suit]},children:s[e.suit]}),(0,a.jsxs)(`div`,{style:{color:c[e.suit],transform:`rotate(180deg)`},children:[l[e.value-1],` `,s[e.suit]]})]}):(0,a.jsx)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,background:`#2c3e50`,border:`2px solid #34495e`,borderRadius:`4px`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:u<=480?`20px`:`24px`,cursor:`pointer`,boxShadow:t?`0 0 8px #3498db`:`0 2px 4px rgba(0,0,0,0.2)`},children:`ðŸ‚ `}),A=m.every(e=>e.length===13);return(0,a.jsx)(e,{title:`Solitario`,width:u<=480?Math.min(400,window.innerWidth-20):u<=768?Math.min(700,window.innerWidth-40):800,height:u<=480?Math.min(600,window.innerHeight-100):u<=768?Math.min(700,window.innerHeight-80):700,defaultPosition:{x:u<=480?10:u<=768?20:100,y:u<=480?10:u<=768?20:50},onClose:t,onMinimize:n,icon:r,children:(0,a.jsxs)(`div`,{style:{padding:u<=480?`10px`:`15px`,display:`flex`,flexDirection:`column`,height:`100%`,gap:`15px`,background:`#2ecc71`,overflow:`auto`},children:[A&&(0,a.jsx)(`div`,{style:{padding:`20px`,background:`#f39c12`,color:`#fff`,textAlign:`center`,borderRadius:`4px`,fontSize:u<=480?`16px`:`20px`,fontWeight:`bold`,marginBottom:`10px`},children:`ðŸŽ‰ Hai vinto! ðŸŽ‰`}),(0,a.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`10px`},children:(0,a.jsx)(`button`,{onClick:w,style:{marginRight:`10px`},children:`Nuova Partita`})}),(0,a.jsxs)(`div`,{style:{display:`flex`,gap:`10px`,marginBottom:`20px`},children:[(0,a.jsx)(`div`,{onClick:T,style:{cursor:`pointer`},children:v.length>0?(0,a.jsx)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,background:`#2c3e50`,border:`2px solid #34495e`,borderRadius:`4px`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:u<=480?`20px`:`24px`},children:`ðŸ‚ `}):(0,a.jsx)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,border:`2px dashed #ccc`,borderRadius:`4px`}})}),(0,a.jsx)(`div`,{onClick:()=>g.length>0&&O(`waste`,0),children:g.length>0?k(g[g.length-1],b?.type===`waste`&&b.index===0):(0,a.jsx)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,border:`2px dashed #ccc`,borderRadius:`4px`}})}),(0,a.jsx)(`div`,{style:{flex:1}}),m.map((e,t)=>(0,a.jsx)(`div`,{onClick:()=>O(`foundation`,t),style:{cursor:`pointer`},children:e.length>0?k(e[e.length-1],b?.type===`foundation`&&b.index===t):(0,a.jsx)(`div`,{style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,border:`2px dashed #95a5a6`,borderRadius:`4px`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:u<=480?`16px`:`20px`,color:`#95a5a6`},children:s[o[t]]})},t))]}),(0,a.jsx)(`div`,{style:{display:`flex`,gap:`8px`,flex:1,overflowX:`auto`},children:f.map((e,t)=>(0,a.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:e.length>0?u<=480?`-36px`:`-50px`:`0`,minWidth:u<=480?`40px`:`50px`},children:e.length===0?(0,a.jsx)(`div`,{onClick:()=>O(`column`,t,0),style:{width:u<=480?`40px`:`50px`,height:u<=480?`56px`:`70px`,border:`2px dashed #95a5a6`,borderRadius:`4px`,cursor:`pointer`}}):e.map((e,n)=>(0,a.jsx)(`div`,{onClick:()=>O(`column`,t,n),style:{marginTop:n>0?u<=480?`36px`:`50px`:`0`},children:k(e,b?.type===`column`&&b.index===t&&b.cardIndex===n)},n))},t))})]})})}export{u as default};