import{a as e,c as t,o as n,s as r}from"./index-Bkt--c9o.js";var i=t(r(),1),a=t(n(),1);function o({onClose:t,onMinimize:n,icon:r}){let o=(0,i.useRef)(null),[s,c]=(0,i.useState)(!1),[l,u]=(0,i.useState)(`#000000`),[d,f]=(0,i.useState)(5),[p,m]=(0,i.useState)(`pen`),[h,g]=(0,i.useState)(window.innerWidth);(0,i.useEffect)(()=>{let e=()=>g(window.innerWidth);return window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]),(0,i.useEffect)(()=>{let e=o.current;if(!e)return;let t=e.getContext(`2d`);if(!t)return;let n=()=>{let n=e.getBoundingClientRect();e.width=n.width,e.height=n.height,t.fillStyle=`#ffffff`,t.fillRect(0,0,e.width,e.height)};n();let r=()=>{n()};return window.addEventListener(`resize`,r),()=>{window.removeEventListener(`resize`,r)}},[]);let _=e=>{let t=o.current;if(!t)return{x:0,y:0};let n=t.getBoundingClientRect(),r=t.width/n.width,i=t.height/n.height,a=0,s=0;return`touches`in e&&e.touches.length>0?(a=e.touches[0].clientX,s=e.touches[0].clientY):`clientX`in e&&(a=e.clientX,s=e.clientY),{x:(a-n.left)*r,y:(s-n.top)*i}},v=e=>{e.preventDefault();let t=o.current;if(!t)return;let{x:n,y:r}=_(e);c(!0);let i=t.getContext(`2d`);i&&(i.lineWidth=d,i.lineCap=`round`,i.lineJoin=`round`,p===`eraser`?i.globalCompositeOperation=`destination-out`:(i.globalCompositeOperation=`source-over`,i.strokeStyle=l,i.fillStyle=l),i.beginPath(),i.arc(n,r,d/2,0,Math.PI*2),i.fill(),i.beginPath(),i.moveTo(n,r))},y=e=>{if(e.preventDefault(),!s)return;let t=o.current;if(!t)return;let n=t.getContext(`2d`);if(!n)return;let{x:r,y:i}=_(e);n.lineWidth=d,n.lineCap=`round`,n.lineJoin=`round`,p===`eraser`?n.globalCompositeOperation=`destination-out`:(n.globalCompositeOperation=`source-over`,n.strokeStyle=l),n.lineTo(r,i),n.stroke(),n.beginPath(),n.moveTo(r,i)},b=()=>{c(!1)};return(0,a.jsx)(e,{title:`Paint`,width:h<=480?Math.min(350,window.innerWidth-20):h<=768?Math.min(600,window.innerWidth-40):800,height:h<=480?Math.min(500,window.innerHeight-100):h<=768?Math.min(600,window.innerHeight-80):700,defaultPosition:{x:h<=480?10:h<=768?20:100,y:h<=480?10:h<=768?20:50},onClose:t,onMinimize:n,icon:r,children:(0,a.jsxs)(`div`,{style:{padding:h<=480?`10px`:`15px`,display:`flex`,flexDirection:`column`,height:`100%`,gap:`10px`},children:[(0,a.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`8px`,padding:`10px`,background:`#f0f0f0`,borderRadius:`4px`,alignItems:`center`},children:[(0,a.jsxs)(`div`,{style:{display:`flex`,gap:`5px`},children:[(0,a.jsx)(`button`,{onClick:()=>m(`pen`),style:{padding:`6px 12px`,background:p===`pen`?`#0078d4`:`#e0e0e0`,color:p===`pen`?`#fff`:`#000`,border:`1px solid #c0c0c0`,cursor:`pointer`,fontSize:h<=480?`11px`:`12px`,fontWeight:p===`pen`?`bold`:`normal`},children:`âœï¸ Penna`}),(0,a.jsx)(`button`,{onClick:()=>m(`eraser`),style:{padding:`6px 12px`,background:p===`eraser`?`#0078d4`:`#e0e0e0`,color:p===`eraser`?`#fff`:`#000`,border:`1px solid #c0c0c0`,cursor:`pointer`,fontSize:h<=480?`11px`:`12px`,fontWeight:p===`eraser`?`bold`:`normal`},children:`ðŸ§¹ Gomma`})]}),(0,a.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,a.jsx)(`label`,{style:{fontSize:h<=480?`11px`:`12px`,whiteSpace:`nowrap`},children:`Dimensione:`}),(0,a.jsx)(`input`,{type:`range`,min:`1`,max:`50`,value:d,onChange:e=>f(parseInt(e.target.value)),style:{width:`80px`}}),(0,a.jsxs)(`span`,{style:{fontSize:h<=480?`11px`:`12px`,minWidth:`30px`},children:[d,`px`]})]}),(0,a.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,a.jsx)(`label`,{style:{fontSize:h<=480?`11px`:`12px`,whiteSpace:`nowrap`},children:`Colore:`}),(0,a.jsx)(`input`,{type:`color`,value:l,onChange:e=>u(e.target.value),style:{width:`40px`,height:`30px`,border:`1px solid #c0c0c0`,cursor:`pointer`,borderRadius:`2px`}})]}),(0,a.jsxs)(`div`,{style:{display:`flex`,gap:`5px`,marginLeft:`auto`},children:[(0,a.jsx)(`button`,{onClick:()=>{let e=o.current;if(!e)return;let t=e.getContext(`2d`);t&&(t.fillStyle=`#ffffff`,t.fillRect(0,0,e.width,e.height))},style:{padding:`6px 12px`,background:`#e0e0e0`,border:`1px solid #c0c0c0`,cursor:`pointer`,fontSize:h<=480?`11px`:`12px`},children:`ðŸ—‘ï¸ Pulisci`}),(0,a.jsx)(`button`,{onClick:()=>{let e=o.current;if(!e)return;let t=document.createElement(`a`);t.download=`disegno.png`,t.href=e.toDataURL(),t.click()},style:{padding:`6px 12px`,background:`#e0e0e0`,border:`1px solid #c0c0c0`,cursor:`pointer`,fontSize:h<=480?`11px`:`12px`},children:`ðŸ’¾ Salva`})]})]}),(0,a.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`5px`,padding:`8px`,background:`#f0f0f0`,borderRadius:`4px`,alignItems:`center`},children:[(0,a.jsx)(`span`,{style:{fontSize:h<=480?`11px`:`12px`,marginRight:`5px`},children:`Colori rapidi:`}),[`#000000`,`#ffffff`,`#ff0000`,`#00ff00`,`#0000ff`,`#ffff00`,`#ff00ff`,`#00ffff`,`#ffa500`,`#800080`,`#a52a2a`,`#808080`,`#008000`,`#000080`,`#800000`].map(e=>(0,a.jsx)(`button`,{onClick:()=>u(e),style:{width:h<=480?`24px`:`28px`,height:h<=480?`24px`:`28px`,background:e,border:l===e?`3px solid #0078d4`:`2px solid #c0c0c0`,cursor:`pointer`,borderRadius:`2px`,boxShadow:l===e?`0 0 5px rgba(0, 120, 212, 0.5)`:`none`},title:e},e))]}),(0,a.jsx)(`div`,{style:{flex:1,border:`2px solid #c0c0c0`,borderRadius:`4px`,overflow:`hidden`,background:`#ffffff`,position:`relative`},children:(0,a.jsx)(`canvas`,{ref:o,onMouseDown:v,onMouseMove:y,onMouseUp:b,onMouseLeave:b,onTouchStart:v,onTouchMove:y,onTouchEnd:b,style:{width:`100%`,height:`100%`,cursor:p===`eraser`?`grab`:`crosshair`,touchAction:`none`}})}),(0,a.jsx)(`div`,{style:{padding:`8px`,background:`#f0f0f0`,borderRadius:`4px`,fontSize:h<=480?`10px`:`11px`,color:`#666`,fontStyle:`italic`},children:`ðŸ’¡ Suggerimento: Usa il mouse per disegnare. Cambia strumento, colore e dimensione dalla barra degli strumenti.`})]})})}export{o as default};